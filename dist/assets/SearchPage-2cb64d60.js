import{r as o,j as e,u as N,f as G,d as D,e as I,b as r,L as y,h as C,G as M}from"./index-6febbc72.js";import{c as L,d as b}from"./api-32c7f2a8.js";const B="_Form_cm9pi_1",k="_Input_cm9pi_17",E="_SubmitBtn_cm9pi_47",j={Form:B,Input:k,SubmitBtn:E},$=({onSubmit:m})=>{const[l,a]=o.useState(""),i=t=>{a(t.target.value.trim().toLowerCase())},h=t=>{t.preventDefault(),m(l)};return e.jsxs("form",{onSubmit:h,className:j.Form,children:[e.jsx("input",{className:j.Input,type:"text",autoFocus:!0,onChange:i}),e.jsx("button",{type:"submit",className:j.SubmitBtn,children:"Search"})]})},q="_GenresContainer_16a3e_1",F="_GenresList_16a3e_53",P="_Genre_16a3e_1",O="_GenreSelected_16a3e_77",A="_DropdownInput_16a3e_101",Q="_DropdownMenu_16a3e_127",V="_DropdownItem_16a3e_153",H="_DropdownItemSelected_16a3e_173",c={GenresContainer:q,GenresList:F,Genre:P,GenreSelected:O,DropdownInput:A,DropdownMenu:Q,DropdownItem:V,DropdownItemSelected:H},R=({placeHolder:m,getFilteredValue:l})=>{const[a,i]=o.useState(null),[h,t]=o.useState(!1),{data:S}=N(),p=(S==null?void 0:S.genres)??[],d=p.map(s=>s.name),u=d.slice(0,G());u.push("All");const f=d.slice(G(),d.length);o.useEffect(()=>{const s=()=>t(!1);return window.addEventListener("click",s),()=>{window.removeEventListener("click",s)}});const _=s=>{s.stopPropagation(),t(!h)},v=()=>f.find(s=>s===a)?a:m,x=s=>{if(i(s),s==="All")return l("all");const g=p.find(w=>{if(w.name===s)return w.id});l(g.id)},n=s=>s===a;return e.jsxs("div",{className:c.GenresContainer,children:[e.jsx("div",{className:c.GenresList,children:u.map(s=>e.jsx("div",{className:n(s)?`${c.GenreSelected}`:`${c.Genre}`,onClick:()=>x(s),children:s},s))}),e.jsxs("div",{className:c.DropdownContainer,children:[e.jsxs("div",{className:c.DropdownInput,onClick:_,children:[e.jsx("div",{className:"dropdown-selected-value",children:v()}),e.jsx("div",{className:"dropdown-tools",children:e.jsx("div",{className:"dropdown-tool",children:"â–¼"})})]}),h&&e.jsx("div",{className:c.DropdownMenu,children:f.map(s=>e.jsx("div",{className:n(s)?`${c.DropdownItemSelected}`:`${c.DropdownItem}`,onClick:()=>x(s),children:s},s))})]})]})},J=()=>{const[m,l]=o.useState([]),[a,i]=o.useState([]),[h,t]=o.useState(!1),S=D(),[p,d]=I({query:"",genre:""}),u=p.get("query")??"",f=p.get("genre")??"";let _=1;o.useEffect(()=>{if(u===""){t(!1);return}L(u,_).then(n=>{t(!1),n.length===0&&t(!0),l(n)}).catch(n=>{console.log(n)})},[_,u]),o.useEffect(()=>{f!==""&&b(f).then(n=>{t(!1),n.length===0&&t(!0),i(n.results)}).catch(n=>{console.log(n)})},[f]);const v=n=>{d({query:"",genre:n}),l([])},x=n=>{if(n!==u){if(n===""){i([]),d({query:"",genre:p});return}l([]),i([]),d({query:n,genre:""})}};return e.jsxs("div",{children:[e.jsx("div",{className:r.SearchGanresContainer,children:e.jsx($,{onSubmit:x})}),e.jsx("ul",{className:r.List,children:m.map(n=>e.jsx("li",{className:r.ListItem,children:e.jsx(y,{to:`/movies/${n.id}`,state:{from:S},className:r.Link,children:e.jsxs("div",{className:r.ItemInfo,children:[e.jsx("p",{className:r.Title,children:n.title}),e.jsxs("p",{className:r.Date,children:[e.jsx("span",{children:"|"}),C(n.release_date)]})]})})},n.id))}),e.jsx("div",{className:r.SerchedContainer,children:a&&e.jsx(M,{movies:a})}),a.length===0&&m.length===0&&e.jsx("div",{className:r.Plug}),e.jsx(R,{placeHolder:"Others",getFilteredValue:v}),h&&e.jsx("p",{className:r.FailMessage,children:"No matching results"})]})};export{J as default};
