import{r as c,j as e,u as N,f as G,d as D,e as I,b as r,L as y,h as C,G as M}from"./index-3d5ae920.js";import{c as L,d as b}from"./api-32c7f2a8.js";const B="_Form_cm9pi_1",k="_Input_cm9pi_17",E="_SubmitBtn_cm9pi_47",j={Form:B,Input:k,SubmitBtn:E},$=({onSubmit:f})=>{const[o,l]=c.useState(""),i=t=>{l(t.target.value.trim().toLowerCase())},m=t=>{t.preventDefault(),f(o)};return e.jsxs("form",{onSubmit:m,className:j.Form,children:[e.jsx("input",{className:j.Input,type:"text",autoFocus:!0,onChange:i}),e.jsx("button",{type:"submit",className:j.SubmitBtn,children:"Search"})]})},q="_GenresContainer_16a3e_1",F="_GenresList_16a3e_53",P="_Genre_16a3e_1",O="_GenreSelected_16a3e_77",A="_DropdownInput_16a3e_101",Q="_DropdownMenu_16a3e_127",V="_DropdownItem_16a3e_153",H="_DropdownItemSelected_16a3e_173",a={GenresContainer:q,GenresList:F,Genre:P,GenreSelected:O,DropdownInput:A,DropdownMenu:Q,DropdownItem:V,DropdownItemSelected:H},R=({placeHolder:f,getFilteredValue:o})=>{const[l,i]=c.useState(null),[m,t]=c.useState(!1),{data:S}=N(),h=(S==null?void 0:S.genres)??[],d=h.map(s=>s.name),u=d.slice(0,G());u.push("All");const p=d.slice(G,d.length);c.useEffect(()=>{const s=()=>t(!1);return window.addEventListener("click",s),()=>{window.removeEventListener("click",s)}});const _=s=>{s.stopPropagation(),t(!m)},v=()=>p.find(s=>s===l)?l:f,x=s=>{if(i(s),s==="All")return o("all");const g=h.find(w=>{if(w.name===s)return w.id});o(g.id)},n=s=>s===l;return e.jsxs("div",{className:a.GenresContainer,children:[e.jsx("div",{className:a.GenresList,children:u.map(s=>e.jsx("div",{className:n(s)?`${a.GenreSelected}`:`${a.Genre}`,onClick:()=>x(s),children:s},s))}),e.jsxs("div",{className:a.DropdownContainer,children:[e.jsxs("div",{className:a.DropdownInput,onClick:_,children:[e.jsx("div",{className:"dropdown-selected-value",children:v()}),e.jsx("div",{className:"dropdown-tools",children:e.jsx("div",{className:"dropdown-tool",children:"â–¼"})})]}),m&&e.jsx("div",{className:a.DropdownMenu,children:p.map(s=>e.jsx("div",{className:n(s)?`${a.DropdownItemSelected}`:`${a.DropdownItem}`,onClick:()=>x(s),children:s},s))})]})]})},J=()=>{const[f,o]=c.useState([]),[l,i]=c.useState([]),[m,t]=c.useState(!1),S=D(),[h,d]=I({query:"",genre:""}),u=h.get("query")??"",p=h.get("genre")??"";let _=1;c.useEffect(()=>{if(u===""){t(!1);return}L(u,_).then(n=>{t(!1),n.length===0&&t(!0),o(n)}).catch(n=>{console.log(n)})},[_,u]),c.useEffect(()=>{p!==""&&b(p).then(n=>{t(!1),n.length===0&&t(!0),i(n.results)}).catch(n=>{console.log(n)})},[p]);const v=n=>{d({query:"",genre:n}),o([])},x=n=>{if(n!==u){if(n===""){i([]),d({query:"",genre:h});return}o([]),i([]),d({query:n,genre:""})}};return e.jsxs("div",{children:[e.jsx("div",{className:r.SearchGanresContainer,children:e.jsx($,{onSubmit:x})}),e.jsx("ul",{className:r.List,children:f.map(n=>e.jsx("li",{className:r.ListItem,children:e.jsx(y,{to:`/movies/${n.id}`,state:{from:S},className:r.Link,children:e.jsxs("div",{className:r.ItemInfo,children:[e.jsx("p",{className:r.Title,children:n.title}),e.jsxs("p",{className:r.Date,children:[e.jsx("span",{children:"|"}),C(n.release_date)]})]})})},n.id))}),e.jsx("div",{className:r.SerchedContainer,children:l&&e.jsx(M,{movies:l})}),e.jsx(R,{placeHolder:"Others",getFilteredValue:v}),m&&e.jsx("p",{className:r.FailMessage,children:"No matching results"})]})};export{J as default};
